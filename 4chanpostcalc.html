<!DOCTYPE html>
<!-- 4chan Post Calculator - Coded by Jonny -->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="4chan Post Calculator">
		<meta name="author" content="Jonny (jonnyli1125)">
		<title>4chan Post Calculator</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js" type="text/javascript"></script>
		 <!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link rel="icon" type="image/png" href="https://github.com/favicon.png"/>
		<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">
		<style>
		body { padding-top: 45px; background-color: #FFFFFF; font-family: 'Droid Sans', sans-serif; }
		h1 { text-align: center; }
		.footer { margin: 0 auto; position: fixed; bottom: 0px; width: 940px; height: 150px; }
		.hidden { display: none; }
		.countdownarea { text-align: center; padding-top: 50px; padding-bottom: 50px; }
		</style>
	</head>
	<body>
		<div class="container">
			<div id="body" class="hidden">
				<h1 style="color: #499249;">4chan post calculator</h1><br>
				<hr>
				<p style="text-align: center;">
				Enter a post number (partial post numbers okay too): 
				<input name="nextpost" id="nextpost" value="0000"/>&nbsp;
				<button name="start" id="start" class="btn btn-success">Start Countdown</button>
				</p>
				<div id="counter" class="hidden countdownarea">
					<h3 name="counterinput" id="counterinput">The next post to end with the number %input% will show in</h3>
					<h1 name="countertimeleft" id="countertimeleft">%timeleft%</h1>
					<h3>seconds.</h3>
				</div>
				<div class="footer">
					<hr>
					<div id="about" class="hidden">
						<h4>About</h4>
						<p>Calculates when the next inputted post number will occur. Basically just a countdown using Unix Timestamps to calculate the differences in time (because 4chan uses Unix Timestamps to assign post numbers).</p><br>
					</div>
					<div id="license" class="hidden">
						<h4>License Information</h4>
						<p><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">4chan Post Calculator</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://jonnyli1125.github.com/" property="cc:attributionName" rel="cc:attributionURL">Jonny Li (jonnyli1125)</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</p>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script>
	$(document).ready(function() { 
		$("#body").fadeIn(300);
		$("#" + currentVisible).fadeIn(300);
		footerLoop();
	});
	var currentVisible = "about";
	function footerLoop() {
		setTimeout(function() {
			if (currentVisible == "about") { $("#about").fadeOut(300, function() { $("#license").fadeIn(300); currentVisible = "license"; }); }
			else if (currentVisible == "license") { $("#license").fadeOut(300, function() { $("#about").fadeIn(300); currentVisible = "about"; }); }
			footerLoop();
		}, 8000);
	}
	var now;
	var timeleft;
	var started = false;
	$("#start").click(function() {
		if (started) return false;
		else if (!started && ($(".countdownarea").is(":visible"))) { 
			$("h3").show();
			now = Math.round((new Date()).getTime() / 1000); // unix timestamp of now.
			$("#counterinput").text("The next post to end with the number " + $("#nextpost").val() + " will show in approximately");
			$("#countertimeleft").text("Calculating...");
			countdown();
		}
		now = Math.round((new Date()).getTime() / 1000); // unix timestamp of now.
		$("#counterinput").text("The next post to end with the number " + $("#nextpost").val() + " will show in approximately");
		if (!($(".countdownarea").is(":visible"))) { 
			$("#countertimeleft").text("Calculating...");
			$(".countdownarea").slideDown(300);
			countdown();
		}
	});
	$("#nextpost").keydown(function() { if (started) return false; });
	function countdown() {
		setTimeout(function() {
			if (!started) {
				timeleft = now;
				while (true) {
					timeleft++;
					if (endsWith(timeleft.toString(), $("#nextpost").val().toString())) {
						timeleft = timeleft - now;
						break;
					}
				}
				started = true;
			}
			timeleft--;
			$("#countertimeleft").text(timeleft);
			if (timeleft > 0) countdown();
			else { 
				$("h3").hide();
				$("#countertimeleft").text("Post number " +  Math.round((new Date()).getTime() / 1000) + " is now!");
				started = false; 
			}
		}, 1000);
	}
	function endsWith(str, suffix) { return str.indexOf(suffix, str.length - suffix.length) !== -1; }
	</script>
</html>